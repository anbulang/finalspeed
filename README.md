# FinalSpeed
FinalSpeed是高速双边加速软件,可加速所有基于tcp协议的网络服务,在高丢包和高延迟环境下,仍可达到90%的物理带宽利用率,即使高峰时段也能轻松跑满带宽.

### 安装教程
[客户端安装说明](http://www.d1sm.net/thread-7-1-1.html)
<br />
[服务端安装说明](http://www.d1sm.net/thread-8-1-1.html)

### 使用帮助
```
需要管理员权限
java -jar finalspeed.jar -b 运行CLI版
java -jar finalspeed.jar 运行GUI版
```

CLI版本需要手动配置, 且配置文件与finalspeed必须处在同一目录下.
clien_config.json
```
{
    // 下载速度，单位是 B，字节。这里换算起来就是 11MB。请把这里改成本机的下载速度
    "download_speed": 11200698, 
    // 协议：tcp 或 udp。注意：服务端如果是 OpenVZ 架构的话，则只支持 udp。
    "protocal": "udp", 
    // 服务器地址
    "server_address": "1.2.3.4", 
    // 一般不需要更改，保持默认即可。
    "server_port": 150, 
    // 不需要更改，保持默认即可。
    "socks5_port": 1083, 
    // 上传速度，单位是 B，字节。
    "upload_speed": 357469
}
```
port_map.json
```
{
    "map_list": [
        {
            // 要加速的服务器端口
            "dst_port": 12345, 
            // 本地端口
            "listen_port": 1099, 
            // 备注信息
            "name": "ss"
        }, 
        {
            "dst_port": 23456, 
            "listen_port": 2200, 
            "name": "ssh"
        }
    ]
}
```

论坛 http://www.d1sm.net/forum-44-1.html

### FinalSpeed 原理简介
1. 传输层协议主要有udp和tcp.

tcp是目前应用最广的传输协议,自带丢包重传,拥塞控制,开发人员无需考虑传输链路质量,带宽,直接调用接口就可无差错的收发数据,最简单便捷.

udp和tcp一样位于ip层之上,但是没有实现重传,拥塞机制,如何发送,接收完全取决于开发者,发送速度不受系统限制,所以非常适合游戏,视频,语音应用,同样的网络环境下,速度更快,体验更好,但是也要求设计更好的拥塞控制机制,才能有效利用带宽,避免网络拥堵.

finalspeed前身是redsocket,基于tcp协议实现,可以聚合多个tcp连接成一个加速通道,在实际环境中,下载大文件,播放视频都有良好的效果,基本上用于聚合的连接数有几个,就能提高几倍速度,类似的协议还有mptcp.

但是在长期使用中也发现不少缺点,比如小文件加速效果不明显,容易卡死,经过分析都是由tcp协议的特性造成,使用tcp永远无法解决,所以finalspeed选择使用udp协议.
 
 2. 国内访问国外网络传输延迟大,在150ms-500ms之间,并且出口带宽小,必然造成高峰时段丢包,抖动厉害,一般的拥塞控制协议遇到丢包会降低发送速度,在干扰不断,频繁丢包的环境中,必然速度越来越慢,难以接受.

因此finalspeed使用固定传输速度,遇到丢包也不降速,并且没有慢启动,起步就是满速,从而达到访问国外国内一样,甚至更快的体验.

为了避免速度过快造成丢包,客户端必须设置物理带宽,经过大量测试,只要将速度控制在物理带宽内,就不会造成网络拥堵,也不会增加丢包率和带宽浪费.

归根到底还是由于国际出口带宽太小,远远无法满足需求,如果带宽充裕,也不需要各种加速手段.
